import{r as i,h as t}from"./p-bbba1366.js";import{C as s}from"./p-c75f912f.js";let e=class{constructor(t){i(this,t),this.width=640,this.height=480,this.entities=[{id:"abcdef1",x:20,y:30,kind:s.NOTES},{id:"abcdef2",x:22,y:32,kind:s.NOTES},{id:"abcdef3",x:24,y:34,kind:s.NOTES},{id:"abcdef4",x:26,y:36,kind:s.NOTES},{id:"abcdef5",x:28,y:38,kind:s.NOTES},{id:"abcdef6",x:30,y:40,kind:s.NOTES},{id:"abcdef7",x:32,y:42,kind:s.NOTES},{id:"abcdef8",x:34,y:44,kind:s.PIN},{id:"abcdef9",x:36,y:46,kind:s.PIN}],this.canvasOffset={x:0,y:0},this.focusedEntitiesIds=new Set,this.isDragging=!1,this.isDraggingCanvas=!1,this.mouseStartOffset={x:0,y:0}}handleMousedown(i){this.mouseStartOffset={x:i.clientX,y:i.clientY};const t=["RIKI-CANVAS","RIKI-ENTITY"].filter((t=>{switch(i.button){case 0:return"RIKI-ENTITY"===t;case 1:return"RIKI-CANVAS"===t;default:return!1}})),s=i.composedPath().find((i=>t.includes(i.tagName)));s&&(this.isDragging=!0,this.focusedEntitiesIds.clear(),"RIKI-CANVAS"===s.tagName&&(this.isDraggingCanvas=!0),"RIKI-ENTITY"===s.tagName&&this.focusedEntitiesIds.add(this.entities.map((i=>i.id)).find((i=>i===s.id))))}handleMousemove(i){if(!this.isDragging)return;const t=i.clientX-this.mouseStartOffset.x,s=i.clientY-this.mouseStartOffset.y;this.isDraggingCanvas?this.canvasOffset={x:this.canvasOffset.x+t,y:this.canvasOffset.y+s}:this.entities=this.entities.map((i=>(this.focusedEntitiesIds.has(i.id)&&(i.x+=t,i.y+=s),i))),this.mouseStartOffset={x:i.clientX,y:i.clientY}}handleMouseup(i){this.isDragging&&(this.focusedEntitiesIds.clear(),this.isDragging=!1,this.isDraggingCanvas=!1)}render(){return t("div",{class:"riki-canvas",style:{position:"absolute",left:`${this.canvasOffset.x}px`,top:`${this.canvasOffset.y}px`}},this.entities.map((i=>t("riki-entity",{style:{position:"absolute",left:`${i.x}px`,top:`${i.y}px`},id:i.id,e:i}))))}};e.style=".riki-canvas{width:800px;height:600px;background-size:10px 10px;background-image:radial-gradient(circle, #a6a6a6 1px, #fefefe 1px)}";export{e as riki_canvas}